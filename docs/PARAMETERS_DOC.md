# TexasSolver é…ç½®å‚æ•°æ–‡æ¡£

æœ¬æ–‡æ¡£è¯¦ç»†è¯´æ˜äº† TexasSolver æ‰‘å…‹æ±‚è§£å™¨é…ç½®æ–‡ä»¶ä¸­å„å‚æ•°çš„å«ä¹‰å’Œç”¨æ³•ã€‚

---

## ç›®å½•

- [åŸºç¡€è®¾ç½®](#åŸºç¡€è®¾ç½®)
- [æ‰‹ç‰ŒèŒƒå›´è®¾ç½®](#æ‰‹ç‰ŒèŒƒå›´è®¾ç½®)
- [ä¸‹æ³¨å°ºå¯¸è®¾ç½®](#ä¸‹æ³¨å°ºå¯¸è®¾ç½®)
- [æ±‚è§£æ§åˆ¶å‚æ•°](#æ±‚è§£æ§åˆ¶å‚æ•°)
- [æ‰§è¡Œä¸è¾“å‡º](#æ‰§è¡Œä¸è¾“å‡º)

---

## åŸºç¡€è®¾ç½®

### `set_pot`

**è¯­æ³•**: `set_pot <æ•°å€¼>`

**ç¤ºä¾‹**: `set_pot 5`

**è¯´æ˜**: è®¾ç½®å½“å‰åº•æ± å¤§å°ï¼Œå•ä½ä¸ºå¤§ç›²æ³¨ï¼ˆBBï¼‰ã€‚

---

### `set_effective_stack`

**è¯­æ³•**: `set_effective_stack <æ•°å€¼>`

**ç¤ºä¾‹**: `set_effective_stack 100`

**è¯´æ˜**: è®¾ç½®æœ‰æ•ˆç­¹ç æ·±åº¦ï¼Œå•ä½ä¸ºå¤§ç›²æ³¨ï¼ˆBBï¼‰ã€‚æœ‰æ•ˆç­¹ç æ˜¯æŒ‡ä¸¤ä½ç©å®¶ä¸­ç­¹ç è¾ƒå°‘è€…çš„ç­¹ç é‡ã€‚

---

### `set_board`

**è¯­æ³•**: `set_board <ç‰Œ1>,<ç‰Œ2>,<ç‰Œ3>[,<ç‰Œ4>[,<ç‰Œ5>]]`

**ç¤ºä¾‹**: `set_board Ac,Ad,Ah`

**è¯´æ˜**: è®¾ç½®å…¬å…±ç‰Œé¢ã€‚

**ç‰Œé¢æ ¼å¼**:
- ç‰Œé¢å€¼: `A`, `K`, `Q`, `J`, `T`, `9`, `8`, `7`, `6`, `5`, `4`, `3`, `2`
- èŠ±è‰²: 
  - `c` = æ¢…èŠ± (Clubs â™£)
  - `d` = æ–¹å— (Diamonds â™¦)
  - `h` = çº¢æ¡ƒ (Hearts â™¥)
  - `s` = é»‘æ¡ƒ (Spades â™ )

**ç¤ºä¾‹è§£æ**: `Ac,Ad,Ah` è¡¨ç¤ºç¿»ç‰Œé¢ä¸ºæ¢…èŠ±Aã€æ–¹å—Aã€çº¢æ¡ƒAã€‚

---

## æ‰‹ç‰ŒèŒƒå›´è®¾ç½®

### `set_range_oop`

**è¯­æ³•**: `set_range_oop <æ‰‹ç‰ŒèŒƒå›´è¡¨è¾¾å¼>`

**è¯´æ˜**: è®¾ç½® OOPï¼ˆOut of Positionï¼Œä½ç½®ä¸åˆ©æ–¹ï¼‰çš„èµ·æ‰‹ç‰ŒèŒƒå›´ã€‚

---

### `set_range_ip`

**è¯­æ³•**: `set_range_ip <æ‰‹ç‰ŒèŒƒå›´è¡¨è¾¾å¼>`

**è¯´æ˜**: è®¾ç½® IPï¼ˆIn Positionï¼Œä½ç½®æœ‰åˆ©æ–¹ï¼‰çš„èµ·æ‰‹ç‰ŒèŒƒå›´ã€‚

---

### æ‰‹ç‰ŒèŒƒå›´è¡¨è¾¾å¼æ ¼å¼

æ‰‹ç‰Œä¹‹é—´ç”¨é€—å·åˆ†éš”ï¼Œæ”¯æŒä»¥ä¸‹æ ¼å¼ï¼š

| æ ¼å¼ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| `XYs` | åŒèŠ±æ‰‹ç‰Œ | `AKs`, `QJs` |
| `XYo` | éåŒèŠ±æ‰‹ç‰Œ | `AKo`, `QJo` |
| `XX` | å£è¢‹å¯¹ | `AA`, `KK`, `22` |
| `æ‰‹ç‰Œ:é¢‘ç‡` | æŒ‡å®šè¿›å…¥èŒƒå›´çš„é¢‘ç‡ (0-1) | `A5s:0.75` è¡¨ç¤º75%é¢‘ç‡ |

**å®Œæ•´ç¤ºä¾‹**:
```
AA,AKs,AQs:0.5,KK,QQ:0.75
```
è¡¨ç¤º: AAå’ŒAKs 100%è¿›å…¥èŒƒå›´ï¼ŒAQs 50%è¿›å…¥ï¼ŒKK 100%è¿›å…¥ï¼ŒQQ 75%è¿›å…¥ã€‚

---

## ä¸‹æ³¨å°ºå¯¸è®¾ç½®

### `set_bet_sizes`

**è¯­æ³•**: `set_bet_sizes <ä½ç½®>,<è¡—é“>,<åŠ¨ä½œç±»å‹>,<å°ºå¯¸åˆ—è¡¨>`

**è¯´æ˜**: è®¾ç½®æŒ‡å®šä½ç½®ã€è¡—é“çš„å¯é€‰ä¸‹æ³¨/åŠ æ³¨å°ºå¯¸ã€‚

#### ä½ç½®å‚æ•°

| å€¼ | å«ä¹‰ |
|----|------|
| `oop` | ä½ç½®ä¸åˆ©æ–¹ (Out of Position) |
| `ip` | ä½ç½®æœ‰åˆ©æ–¹ (In Position) |

#### è¡—é“å‚æ•°

| å€¼ | å«ä¹‰ |
|----|------|
| `flop` | ç¿»ç‰Œåœˆ |
| `turn` | è½¬ç‰Œåœˆ |
| `river` | æ²³ç‰Œåœˆ |

#### åŠ¨ä½œç±»å‹å‚æ•°

| å€¼ | å«ä¹‰ |
|----|------|
| `bet` | ä¸‹æ³¨ï¼ˆå¯¹æ–¹ check åçš„ä¸‹æ³¨ï¼‰ |
| `raise` | åŠ æ³¨ï¼ˆå¯¹æ–¹ä¸‹æ³¨åçš„åŠ æ³¨ï¼‰ |
| `donk` | é¢†å…ˆä¸‹æ³¨ï¼ˆOOP åœ¨æ–°ä¸€è½®é¦–å…ˆä¸‹æ³¨ï¼Œæ— è§†ä¸Šä¸€è½®çš„æ”»å‡»æƒï¼‰ |
| `allin` | å…è®¸å…¨ä¸‹é€‰é¡¹ï¼ˆæ— éœ€æŒ‡å®šå°ºå¯¸ï¼‰ |

#### å°ºå¯¸æ•°å€¼

å°ºå¯¸æ•°å€¼è¡¨ç¤º **åº•æ± çš„ç™¾åˆ†æ¯”**ã€‚ä¾‹å¦‚ï¼š
- `33` = ä¸‹æ³¨åº•æ± çš„ 33%
- `75` = ä¸‹æ³¨åº•æ± çš„ 75%
- `150` = ä¸‹æ³¨åº•æ± çš„ 150%ï¼ˆè¶…æ± ä¸‹æ³¨ï¼‰

**ç¤ºä¾‹**:
```
set_bet_sizes oop,flop,bet,33
set_bet_sizes ip,turn,bet,50,75,150
set_bet_sizes ip,river,allin
```

---

## æ±‚è§£æ§åˆ¶å‚æ•°

### `set_allin_threshold`

**è¯­æ³•**: `set_allin_threshold <æ•°å€¼>`

**ç¤ºä¾‹**: `set_allin_threshold 0.5`

**è¯´æ˜**: è®¾ç½®å…¨ä¸‹é˜ˆå€¼ã€‚å½“æŸæ¬¡ä¸‹æ³¨/åŠ æ³¨çš„é‡‘é¢è¾¾åˆ°å‰©ä½™æœ‰æ•ˆç­¹ç çš„è¯¥æ¯”ä¾‹æ—¶ï¼Œè‡ªåŠ¨è§†ä¸ºå…¨ä¸‹ã€‚

**ç¤ºä¾‹è§£æ**: `0.5` è¡¨ç¤ºå½“ä¸‹æ³¨é‡‘é¢ â‰¥ å‰©ä½™ç­¹ç çš„ 50% æ—¶ï¼Œè‡ªåŠ¨è½¬æ¢ä¸ºå…¨ä¸‹ã€‚

---

### `set_raise_limit`

**è¯­æ³•**: `set_raise_limit <æ•°å€¼>`

**ç¤ºä¾‹**: `set_raise_limit 2`

**è¯´æ˜**: è®¾ç½®æ¯æ¡è¡—çš„æœ€å¤§åŠ æ³¨æ¬¡æ•°é™åˆ¶ã€‚è¶…è¿‡æ­¤é™åˆ¶åä¸å†å…è®¸ç»§ç»­åŠ æ³¨ã€‚

---

### `build_tree`

**è¯­æ³•**: `build_tree`

**è¯´æ˜**: æ ¹æ®ä¹‹å‰è®¾ç½®çš„æ‰€æœ‰å‚æ•°ï¼ˆåº•æ± ã€ç­¹ç ã€ç‰Œé¢ã€èŒƒå›´ã€ä¸‹æ³¨å°ºå¯¸ç­‰ï¼‰æ„å»ºåšå¼ˆæ ‘ã€‚

> âš ï¸ **æ³¨æ„**: æ­¤å‘½ä»¤å¿…é¡»åœ¨è®¾ç½®å®Œæ‰€æœ‰æ¸¸æˆå‚æ•°åã€å¼€å§‹æ±‚è§£å‰æ‰§è¡Œã€‚

---

### `set_thread_num`

**è¯­æ³•**: `set_thread_num <æ•°å€¼>`

**ç¤ºä¾‹**: `set_thread_num 8`

**è¯´æ˜**: è®¾ç½®æ±‚è§£æ—¶ä½¿ç”¨çš„ CPU çº¿ç¨‹æ•°ã€‚å»ºè®®è®¾ç½®ä¸º CPU æ ¸å¿ƒæ•°æˆ–ç•¥å°‘ã€‚

---

### `set_accuracy`

**è¯­æ³•**: `set_accuracy <æ•°å€¼>`

**ç¤ºä¾‹**: `set_accuracy 1`

**è¯´æ˜**: è®¾ç½®æ±‚è§£ç²¾åº¦ç›®æ ‡ï¼ˆä»¥åº•æ± ç™¾åˆ†æ¯”è¡¨ç¤ºçš„å¯åˆ©ç”¨åº¦ï¼‰ã€‚æ•°å€¼è¶Šå°ç²¾åº¦è¶Šé«˜ï¼Œä½†è®¡ç®—æ—¶é—´è¶Šé•¿ã€‚

| ç²¾åº¦å€¼ | å«ä¹‰ |
|--------|------|
| `0.5` | é«˜ç²¾åº¦ï¼ˆå¯åˆ©ç”¨åº¦ < 0.5% åº•æ± ï¼‰ |
| `1` | æ ‡å‡†ç²¾åº¦ |
| `2` | å¿«é€Ÿæ±‚è§£ï¼ˆç²¾åº¦è¾ƒä½ï¼‰ |

---

### `set_max_iteration`

**è¯­æ³•**: `set_max_iteration <æ•°å€¼>`

**ç¤ºä¾‹**: `set_max_iteration 300`

**è¯´æ˜**: è®¾ç½® CFR ç®—æ³•çš„æœ€å¤§è¿­ä»£æ¬¡æ•°ã€‚å³ä½¿æœªè¾¾åˆ°ç²¾åº¦ç›®æ ‡ï¼Œä¹Ÿä¼šåœ¨è¾¾åˆ°æ­¤è¿­ä»£æ¬¡æ•°ååœæ­¢ã€‚

---

### `set_print_interval`

**è¯­æ³•**: `set_print_interval <æ•°å€¼>`

**ç¤ºä¾‹**: `set_print_interval 10`

**è¯´æ˜**: è®¾ç½®æ±‚è§£è¿‡ç¨‹ä¸­æ‰“å°è¿›åº¦ä¿¡æ¯çš„é—´éš”ï¼ˆæ¯éš”å¤šå°‘æ¬¡è¿­ä»£è¾“å‡ºä¸€æ¬¡ï¼‰ã€‚

---

### `set_use_isomorphism`

**è¯­æ³•**: `set_use_isomorphism <0|1>`

**ç¤ºä¾‹**: `set_use_isomorphism 1`

**è¯´æ˜**: æ˜¯å¦å¯ç”¨åŒæ„ä¼˜åŒ–ã€‚

| å€¼ | å«ä¹‰ |
|----|------|
| `1` | å¯ç”¨ï¼ˆåˆ©ç”¨èŠ±è‰²å¯¹ç§°æ€§å‡å°‘è®¡ç®—é‡ï¼Œæ¨èï¼‰ |
| `0` | ç¦ç”¨ |

---

### `set_enable_equity`

**è¯­æ³•**: `set_enable_equity <0|1>`

**ç¤ºä¾‹**: `set_enable_equity 1`

**è¯´æ˜**: æ˜¯å¦å¯ç”¨ Equityï¼ˆèƒœç‡æœŸæœ›ï¼‰çš„è®¡ç®—å’Œå¯¼å‡ºã€‚

| å€¼ | å«ä¹‰ |
|----|------|
| `1` | å¯ç”¨ï¼ˆè®¡ç®—å¹¶å¯¼å‡º equityï¼Œä¼šå¢åŠ å°‘é‡è®¡ç®—å¼€é”€å’Œè¾“å‡ºæ–‡ä»¶å¤§å°ï¼‰ |
| `0` | ç¦ç”¨ï¼ˆé»˜è®¤ï¼Œåªè®¡ç®— EVï¼‰ |

**Equity å®šä¹‰**:
```
equity = win_prob + tie_prob / 2
```
- èµ¢ï¼šç®— 1.0
- å¹³å±€ï¼šç®— 0.5
- è¾“ï¼šç®— 0.0

**ä¸ EV çš„åŒºåˆ«**:

| æŒ‡æ ‡ | å«ä¹‰ | å•ä½ |
|-----|------|-----|
| **EV** | æœŸæœ›æ”¶ç›Š | ç­¹ç æ•° |
| **Equity** | èƒœç‡æœŸæœ› | æ¦‚ç‡ (0-1) |

> ğŸ’¡ **æç¤º**: é»˜è®¤ä¸å¯ç”¨ã€‚åªæœ‰åœ¨éœ€è¦åˆ†æèƒœç‡ç›¸å…³ä¿¡æ¯æ—¶æ‰éœ€è¦å¼€å¯ã€‚

---

### `set_enable_range`

**è¯­æ³•**: `set_enable_range <0|1>`

**ç¤ºä¾‹**: `set_enable_range 1`

**è¯´æ˜**: æ˜¯å¦å¯ç”¨ Rangeï¼ˆæ‰‹ç‰ŒèŒƒå›´ï¼‰çš„å¯¼å‡ºã€‚

| å€¼ | å«ä¹‰ |
|----|------|
| `1` | å¯ç”¨ï¼ˆé»˜è®¤ï¼Œå¯¼å‡ºæ¯ä¸ªèŠ‚ç‚¹çš„æ‰‹ç‰ŒèŒƒå›´ï¼‰ |
| `0` | ç¦ç”¨ï¼ˆå‡å°‘è¾“å‡ºæ–‡ä»¶å¤§å°ï¼‰ |

**Range å®šä¹‰**:
- `reach_probs`ï¼šæ¯ä¸ª combo åˆ°è¾¾å½“å‰èŠ‚ç‚¹çš„æ¦‚ç‡
- åˆå§‹æ—¶ç­‰äºé…ç½®ä¸­çš„ range weight
- éšç€ç©å®¶é‡‡å–åŠ¨ä½œï¼Œrange ä¼šæ›´æ–°ï¼š`new_reach = old_reach Ã— strategy_prob`
- å‘ç‰Œæ—¶ï¼Œä¸æ–°ç‰Œå†²çªçš„ combo ä¼šè¢«ç§»é™¤ï¼ˆreach = 0ï¼‰

**è¾“å‡ºæ ¼å¼**:
```json
{
  "ranges": {
    "player": 0,
    "range": {
      "AcQd": 0.5,
      "KcQd": 1.0,
      ...
    }
  }
}
```

> ğŸ’¡ **æç¤º**: Range å¯¼å‡ºé»˜è®¤å¯ç”¨ã€‚å¦‚æœä¸éœ€è¦æ‰‹ç‰ŒèŒƒå›´ä¿¡æ¯ï¼Œå¯ä»¥è®¾ä¸º 0 ä»¥å‡å°‘è¾“å‡ºæ–‡ä»¶å¤§å°ã€‚

---

## æ‰§è¡Œä¸è¾“å‡º

### `start_solve`

**è¯­æ³•**: `start_solve`

**è¯´æ˜**: å¼€å§‹æ‰§è¡Œ CFR æ±‚è§£ç®—æ³•ã€‚æ±‚è§£å™¨å°†æ ¹æ®ä¹‹å‰æ„å»ºçš„åšå¼ˆæ ‘è¿›è¡Œè¿­ä»£è®¡ç®—ï¼Œç›´åˆ°è¾¾åˆ°ç²¾åº¦ç›®æ ‡æˆ–æœ€å¤§è¿­ä»£æ¬¡æ•°ã€‚

---

### `set_dump_rounds`

**è¯­æ³•**: `set_dump_rounds <æ•°å€¼>`

**ç¤ºä¾‹**: `set_dump_rounds 1`

**è¯´æ˜**: è®¾ç½®å¯¼å‡ºç­–ç•¥æ—¶åŒ…å«çš„å‘ç‰Œè½®æ¬¡æ·±åº¦ã€‚

| å€¼ | å¯¼å‡ºå†…å®¹ |
|----|----------|
| `1` | ä»…å¯¼å‡º Flopï¼ˆç¿»ç‰Œåœˆï¼‰ç­–ç•¥ |
| `2` | å¯¼å‡º Flop + Turnï¼ˆç¿»ç‰Œåœˆ + è½¬ç‰Œåœˆï¼‰ç­–ç•¥ |
| `3` | å¯¼å‡º Flop + Turn + Riverï¼ˆå®Œæ•´ä¸‰æ¡è¡—ï¼‰ç­–ç•¥ |

**æºç å‚è€ƒ** (`PCfrSolver.cpp`):
```cpp
void PCfrSolver::reConvertJson(..., int depth, int max_depth, ...) {
    if(depth >= max_depth) return;  // è¾¾åˆ°æœ€å¤§æ·±åº¦æ—¶åœæ­¢å¯¼å‡º
    ...
}
```

æ¯ç»è¿‡ä¸€ä¸ª chance nodeï¼ˆå‘ç‰ŒèŠ‚ç‚¹ï¼Œå³å‘ turn æˆ– river ç‰Œï¼‰ï¼Œ`depth` å¢åŠ  1ã€‚`dump_rounds` ä½œä¸º `max_depth` å‚æ•°æ§åˆ¶é€’å½’å¯¼å‡ºçš„æ·±åº¦ã€‚

> ğŸ’¡ **æç¤º**: è¾ƒå¤§çš„ `dump_rounds` å€¼ä¼šæ˜¾è‘—å¢åŠ è¾“å‡ºæ–‡ä»¶å¤§å°ã€‚å¦‚æœåªéœ€è¦åˆ†æç¿»ç‰Œåœˆç­–ç•¥ï¼Œè®¾ç½®ä¸º `1` å³å¯ã€‚

---

### `dump_result`

**è¯­æ³•**: `dump_result <æ–‡ä»¶å>`

**ç¤ºä¾‹**: `dump_result my_strategy.json`

**è¯´æ˜**: å°†æ±‚è§£ç»“æœå¯¼å‡ºåˆ°æŒ‡å®šçš„ JSON æ–‡ä»¶ã€‚æ–‡ä»¶å°†ä¿å­˜åˆ°å½“å‰å·¥ä½œç›®å½•æˆ– `results/` ç›®å½•ä¸‹ã€‚

---

## å®Œæ•´é…ç½®ç¤ºä¾‹

```
# åŸºç¡€è®¾ç½®
set_pot 5
set_effective_stack 100
set_board Ac,Ad,Ah

# æ‰‹ç‰ŒèŒƒå›´
set_range_oop AQs,AJs,ATs,KQs,KJs,QQ:0.25,JJ:0.75,...
set_range_ip AA,AKs,AQs,KK,QQ,JJ,...

# ä¸‹æ³¨å°ºå¯¸ - OOP
set_bet_sizes oop,flop,bet,33
set_bet_sizes oop,flop,raise,75
set_bet_sizes oop,turn,bet,25,50,75,150
set_bet_sizes oop,turn,raise,75,150
set_bet_sizes oop,turn,donk,33
set_bet_sizes oop,river,bet,25,50,75,150
set_bet_sizes oop,river,raise,75,150
set_bet_sizes oop,river,donk,33
set_bet_sizes oop,river,allin

# ä¸‹æ³¨å°ºå¯¸ - IP
set_bet_sizes ip,flop,bet,25,50,75
set_bet_sizes ip,flop,raise,75
set_bet_sizes ip,turn,bet,50,75,150
set_bet_sizes ip,turn,raise,75,150
set_bet_sizes ip,river,bet,33,75,110,150
set_bet_sizes ip,river,raise,75,150
set_bet_sizes ip,river,allin

# æ±‚è§£æ§åˆ¶
set_allin_threshold 0.5
set_raise_limit 2
build_tree
set_thread_num 8
set_accuracy 1
set_max_iteration 300
set_print_interval 10
set_use_isomorphism 1
# set_enable_equity 1  # å¯é€‰ï¼šå¯ç”¨ equity è®¡ç®—
# set_enable_range 0   # å¯é€‰ï¼šç¦ç”¨ range å¯¼å‡ºï¼ˆé»˜è®¤å¯ç”¨ï¼‰

# æ‰§è¡Œæ±‚è§£
start_solve

# å¯¼å‡ºç»“æœ
set_dump_rounds 1
dump_result my_strategy.json
```

---

## å‚è€ƒèµ„æ–™

- é¡¹ç›®æºç : `TexasSolver-console/src/tools/CommandLineTool.cpp`
- ç­–ç•¥å¯¼å‡ºé€»è¾‘: `TexasSolver-console/src/solver/PCfrSolver.cpp`
